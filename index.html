<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>AI Emotion-Friendly Tutor</title>

<style>
    body {
        background: #dff3ff;
        font-family: Arial, sans-serif;
        text-align: center;
        padding: 20px;
        color: #004e64;
    }
    h1 {
        background: #8bd3dd;
        padding: 15px;
        border-radius: 12px;
        color: white;
        width: 85%;
        margin: auto;
        margin-bottom: 20px;
        font-size: 30px;
    }
    h2 {
        color: #005f73;
    }
    .section {
        background: white;
        width: 85%;
        margin: 15px auto;
        padding: 18px;
        border-radius: 12px;
        box-shadow: 0 3px 10px rgba(0,0,0,0.15);
        text-align: left;
        font-size: 16px;
        line-height: 1.5;
    }
    button {
        background: #9b5de5;
        color: white;
        padding: 14px 28px;
        border: none;
        font-size: 18px;
        border-radius: 12px;
        cursor: pointer;
        margin-top: 10px;
    }
    button:hover {
        background: #7a35d6;
    }
    #webcam-container canvas {
        margin-top: 20px;
        border-radius: 20px;
        box-shadow: 0 5px 12px rgba(0,0,0,0.2);
    }
    #label-container div {
        background: white;
        border-radius: 10px;
        padding: 12px;
        margin: 10px auto;
        max-width: 350px;
        font-size: 18px;
        box-shadow: 0 3px 8px rgba(0,0,0,0.15);
        text-align: center;
    }
    #statusMessage {
        font-size: 30px;
        margin-top: 20px;
        font-weight: bold;
    }
</style>

<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest/dist/tf.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@latest/dist/teachablemachine-image.min.js"></script>
</head>

<body>

<h1>AI Emotion-Friendly Tutor üéì‚ú®</h1>

<!-- DESCRIPTION SECTION -->
<div class="section">
<h2>What Is This Project?</h2>
<p>
This project is a mix of <b>emotion-aware learning</b>, <b>mental wellness awareness</b>, 
and a <b>productivity helper</b>.  
It uses a Teachable Machine model to recognize three states: <b>Engaged</b>, <b>Confused</b>, and <b>Focused</b>.
</p>
<p>
By detecting these learning-related emotions, this tool can help students understand 
how they‚Äôre feeling during learning, help teachers notice who needs support, and help 
anyone improve their focus and screen habits.
</p>
</div>

<!-- PROBLEM SECTION -->
<div class="section">
<h2>The Problem</h2>
<p>
Many students struggle with online learning: staying engaged, keeping focus, or knowing 
when they‚Äôre confused. Teachers also can‚Äôt always see how students are feeling in real-time.  
This project explores how AI can support learning, reduce stress, and build better study habits.
</p>
</div>

<!-- HOW IT WORKS -->
<div class="section">
<h2>How the Model Works</h2>
<p>
I trained a Teachable Machine model with three classes:
</p>
<ul>
<li><b>Engaged</b> ‚Äì Looking at the screen normally</li>
<li><b>Confused</b> ‚Äì Hand on chin, confused thinking pose</li>
<li><b>Focused</b> ‚Äì Hand over mouth or thinking quietly</li>
</ul>
<p>
The webcam image goes through the model, and it predicts which emotion has the highest probability.  
The website then shows:
</p>
<ul>
<li>The probability for each class</li>
<li>An emoji</li>
<li>A short helpful message</li>
</ul>
</div>

<!-- INSTRUCTIONS -->
<div class="section">
<h2>How to Use This Website</h2>
<ol>
<li>Click the <b>Start</b> button below.</li>
<li>Allow camera permission.</li>
<li>Try making the three different poses:</li>
<ul>
<li>Engaged ‚Äî Just look at the screen üòÄ</li>
<li>Confused ‚Äî Hand on chin ü§î</li>
<li>Focused ‚Äî Hand over mouth üß†</li>
</ul>
<li>Watch the AI detect your emotion in real time!</li>
</ol>
</div>

<button onclick="start()">Start</button>

<div id="webcam-container"></div>
<div id="label-container"></div>
<div id="statusMessage">Press Start üëá</div>

<script>
const URL = "./my_model/";
let model, webcam, labelContainer, maxPredictions;

async function start() {
    document.getElementById("statusMessage").innerHTML = "Loading‚Ä¶ ‚è≥";

    model = await tmImage.load(URL + "model.json", URL + "metadata.json");
    maxPredictions = model.getTotalClasses();

    webcam = new tmImage.Webcam(250, 250, true);
    await webcam.setup();
    await webcam.play();
    window.requestAnimationFrame(loop);

    document.getElementById("webcam-container").appendChild(webcam.canvas);

    labelContainer = document.getElementById("label-container");
    labelContainer.innerHTML = "";
    for (let i = 0; i < maxPredictions; i++) {
        labelContainer.appendChild(document.createElement("div"));
    }

    document.getElementById("statusMessage").innerHTML = "Model Loaded! üòÄ";
}

async function loop() {
    webcam.update();
    await predict();
    window.requestAnimationFrame(loop);
}

async function predict() {
    const prediction = await model.predict(webcam.canvas);

    let topClass = "";
    let topProb = 0;

    for (let i = 0; i < prediction.length; i++) {
        const p = prediction[i];
        labelContainer.childNodes[i].innerHTML =
            `${p.className}: ${p.probability.toFixed(2)}`;

        if (p.probability > topProb) {
            topProb = p.probability;
            topClass = p.className;
        }
    }

    let message = "üôÇ";

    if (topClass === "Engaged") message = "üòÄ You're Engaged!";
    if (topClass === "Confused") message = "ü§î You're Confused!";
    if (topClass === "Focused") message = "üß† You're Focused!";

    document.getElementById("statusMessage").innerHTML = message;
}
</script>

</body>
</html>
